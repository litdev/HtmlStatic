<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>试镜大电影</title>
    <link rel="stylesheet" href="css/pay.css">
</head>

<body>
    <div id="cover"></div>
    <div id="modal">
        <i class="modal-close" onclick="closeModal()"></i>
        <div class="modal-content">
            <div class="ma-box">
                <span>输入优惠码免费体验</span>
                <input type="number" placeholder="优惠码" maxlength="4" name="yh_code" id="yh_code">
                <button onclick="useYHCode()">立即体验</button>
            </div>
        </div>
    </div>
    <div class="pay-top">
        <div class="pay-top-center">
            <span>支付费用</span>
            <span class="money">￥5</span>
        </div>
    </div>
    <span class="span-paytype">支付方式</span>
    <div class="pay-view">
        <div class="pay-item">
            <label for="paytype1" class="pay-item-left"><img src="img/Icon_ModePayment_WeChat@3x.png" alt=""> 微信支付</label>
            <input type="radio" name="paytype" id="paytype1" value="1" checked hidden />
            <label for="paytype1" class="paytype"></label>
        </div>
        <div class="pay-item">
            <label for="paytype2" class="pay-item-left"><img src="img/Icon_ModePayment_CouponCode@3x.png" alt=""> 优惠码支付</label>
            <input type="radio" name="paytype" id="paytype2" value="2" hidden />
            <label for="paytype2" class="paytype"></label>
        </div>
    </div>
    <div class="foot">
        <button onclick="topay()">确认</button>
    </div>

    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <script src="js/layer_mobile/layer.js"></script>
    <script type="text/javascript">
        function topay() {
            var pay_type = $("input[name='paytype']:checked").val();
            if (pay_type == 1) {
                layer.open({
                    content: '微信支付'
                    , skin: 'msg'
                    , time: 3 //3秒后自动关闭
                });
            } else {
                openModal();
            }
        }
        function useYHCode() {
            var code = $("#yh_code").val();
            if (code.length != 4) {
                layer.open({
                    content: '请填写4位优惠码'
                    , skin: 'msg'
                    , time: 2
                });
            }
            //TODO: Ajax请求
            
        }

        function openModal() {
            cover.style.display = "block"; //显示遮罩层
            modal.style.display = "block"; //显示弹出层
        }

        function closeModal() {
            cover.style.display = "none"; //隐藏遮罩层
            modal.style.display = "none"; //隐藏弹出层
        }
    </script>
</body>

</html>